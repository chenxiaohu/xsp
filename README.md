# XSP 使用NodeJS轻松套页面

我从事多年互联网应用后端开发工作，主要采用JSP进行服务端页面开发，也就是常说的用JSP“套页面”。JSP作为一种成熟的页面开发技术对于国内常用的超复杂页面使用起来并不轻松。另外随着移动的发展，多屏幕开发对套页面的工作量要求更大。

那么怎么样才能轻松套页面呢？首先我们看看为什么套页面不轻松。下面我介绍两种典型的情况，也是我们要解决的问题:

	1. PC浏览器的复杂页面：由于各种不同的内容太多，造成页面本身非常复杂，而且套页面的人一般是传统的后端开发，只是按照前端的要求硬做，后端逻辑和前端逻辑混合到一个大杂烩页面，相当的痛苦。更夸张的是页面会经常修改，雪上加霜！痛苦指数立刻上升。

	2. 手机浏览器的简单页面：其实就算很简单的页面，也会经常调用几个不同系统的功能，对于移动网络来说，请求的次数一定要少（多了不但会慢，而且由于移动网络稳定性问题会放大慢，慢到死），通常会需要服务端做一些请求合并，但是对于JSP来讲，做这种事情代价太大。简单点说就是做不快，响应速度慢，慢有两个后果，第一卡死服务器，第二导致用户体验差，对于移动方面来说这是致命的。（另外对于手机APP的支持情况和手机浏览器的情况基本相同，就是要合并多系统的请求，而且不能慢）

对与第一种问题，方案就是模块化。套用当下最流行的“微服务”和“前后端分离”，分解到REST API加上页面的模块化，每件事情都可以比较轻松。

但是。。。每件事情轻松了，结果又回到了第二种问题，慢！对于网络应用来说，一个慢字就干掉了全部！对于JSP类应用来说（其他PHP，ASP应该一样），慢比死还惨。。

大家可能都听过，在软件开发领域解决所有复杂问题的方法都是分解，分解到不负责的很多块就行。duang~ 分解是分解的简单了，可是装起来慢到死，难道是传说中的换种死法。。。

读到这里，大家可以停下来想一想，我说的问题是不是大家也遇到了，如果大家没有同样的问题，那么恭喜您！不需要看后面的内容了。

如果大家也遇到同样的问题，而且想看看我是如何解决的，请继续。

## 如何轻松

电影《一代宗师》里面主角说过一句话：“功夫两个字，一横一竖......”。我想说的是：“软件开发两个字，一拆一合...”。

将一个复杂的软件，拆成很多个简单的模块，完成第一步。
将很多个简单的模块，合成一个完整的软件，搞定！

如果能轻松的将复杂的软件拆成很多简单的模块(简单是指很容易做，而且很难做错)，再轻松的将这些块合成一个完整的软件，而且这个完整的软件的功能和性能都不错。这就是轻松。。我怎么觉得有点绕~~

